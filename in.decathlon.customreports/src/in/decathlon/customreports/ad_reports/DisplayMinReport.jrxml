<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="DisplayMinReport" pageWidth="691" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="691" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="Department" class="java.lang.String"/>
	<parameter name="ad_org_id" class="java.lang.String"/>
	<queryString>
		<![CDATA[select d.name as department,
m.value as modelcode,
p.name as itemcode,
(cl.minqty::numeric) as min,
(cl.maxqty::numeric) as max,
o.name as org,
p.em_cl_modelname,
(cl.displaymin::numeric) as displaymin,
case
WHEN ((cl.displaymin)-(cl.maxqty))<=0
 THEN 'NA'
      ELSE CAST((cl.displaymin)-(cl.maxqty) AS VARCHAR)
END as difference
from cl_minmax cl
join m_product p
on cl.m_product_id = p.m_product_id
join cl_model m
on p.em_cl_modelcode = m.value
join cl_department d
on m.cl_department_id = d.cl_department_id
and p.em_cl_lifestage not like 'Discontinued'
and cl.displaymin > 0
and cl.isinrange = 'Y'
and d.cl_department_id =  $P{Department}
and cl.ad_org_id = $P{ad_org_id}
join ad_org o
on cl.ad_org_id = o.ad_org_id]]>
	</queryString>
	<field name="department" class="java.lang.String"/>
	<field name="modelcode" class="java.lang.String"/>
	<field name="itemcode" class="java.lang.String"/>
	<field name="min" class="java.math.BigDecimal"/>
	<field name="max" class="java.math.BigDecimal"/>
	<field name="org" class="java.lang.String"/>
	<field name="em_cl_modelname" class="java.lang.String"/>
	<field name="displaymin" class="java.math.BigDecimal"/>
	<field name="difference" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="120" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="691" height="120"/>
				<box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="24" isBold="true"/>
				</textElement>
				<text><![CDATA[DISPLAYMIN REPORT]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="100" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="691" height="100"/>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="20" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{org}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="204" y="45" width="290" height="34"/>
				<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0">
					<pen lineWidth="0.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{department}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MODELCODE]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="0" width="104" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MODEL NAME]]></text>
			</staticText>
			<staticText>
				<reportElement x="204" y="0" width="100" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[ITEMCODE]]></text>
			</staticText>
			<staticText>
				<reportElement x="304" y="0" width="95" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MIN]]></text>
			</staticText>
			<staticText>
				<reportElement x="399" y="0" width="95" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MAX]]></text>
			</staticText>
			<staticText>
				<reportElement x="494" y="0" width="101" height="20"/>
				<box topPadding="1" bottomPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[DISPLAYMIN]]></text>
			</staticText>
			<staticText>
				<reportElement x="595" y="0" width="95" height="20"/>
				<box topPadding="1" leftPadding="0" bottomPadding="1" rightPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[DIFFERENCE]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="100" height="20"/>
				<box topPadding="0" leftPadding="1" bottomPadding="1" rightPadding="0">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{modelcode}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="0" width="104" height="20"/>
				<box topPadding="0" leftPadding="1" bottomPadding="1" rightPadding="0">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{em_cl_modelname}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="204" y="0" width="100" height="20"/>
				<box topPadding="0" leftPadding="1" bottomPadding="1" rightPadding="0">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{itemcode}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="304" y="0" width="95" height="20"/>
				<box topPadding="0" leftPadding="1" bottomPadding="1" rightPadding="0">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{min}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="399" y="0" width="95" height="20"/>
				<box topPadding="0" leftPadding="1" bottomPadding="1" rightPadding="0">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{max}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="494" y="0" width="101" height="20"/>
				<box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{displaymin}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="595" y="0" width="95" height="20"/>
				<box bottomPadding="1" rightPadding="1">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{difference}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
